# 要件定義書（簡易版）：ローカル写真ブラウザ Webアプリ（方式A）

---

## 1. 目的
ローカルPC内の特定フォルダにある写真を、ブラウザで快適に閲覧できるようにする。  
外部Web通信は行わず、ローカル環境のみで完結する。

---

## 2. 想定構成（方式A）

### ■ バックエンド
ローカルサーバ（`localhost` で起動）

- 画像一覧取得
- メタ情報管理
- サムネイル生成
- DB保存

### ■ フロントエンド
ブラウザUI

- 写真表示
- フィルタ・ソート
- ランダム表示
- タグ・お気に入り操作

### ■ データ保存
ローカルDB（例：SQLite）

- お気に入り
- 人物タグ
- 設定情報
- キャッシュ情報

---

## 3. 前提・制約

- サーバは **localhost のみ**で待ち受け（外部アクセス不可）
- 外部APIやクラウド連携など **外部通信は行わない**
- 対象写真は、ユーザーが指定したフォルダ配下（再帰的）に存在するもの
- 対象拡張子（例）  
  `jpg / jpeg / png / webp`（必要に応じて追加）

---

## 4. 機能要件

### 4.1 フォルダ指定・スキャン

- 初回に「写真ルートフォルダ」を設定できる
- 指定フォルダ配下をスキャンして写真一覧を作成する
- 再スキャン（手動）できる（追加/削除の反映）

---

### 4.2 写真表示

- 1枚表示（ビュー画面）
- 次へ / 前へ操作
- 拡大表示（フィット / ズームは最低限）

---

### 4.3 ランダム表示

- 全写真からランダムで1枚表示できる
- スライドショー（任意の秒間隔で自動切替）ができる

---

### 4.4 人物ごとの分類（タグ）

- 写真に「人物タグ」を付与できる（複数可）
- 人物タグで絞り込み表示できる
- 絞り込み状態でランダム表示できる

---

### 4.5 お気に入り

- 写真をお気に入り登録 / 解除できる
- お気に入り一覧を表示できる
- お気に入り内でランダム表示 / スライドショーできる

---

### 4.6 ソート

一覧および表示対象の順序を切り替えできる

#### ■ ソート種類（最低限）
- 作成日（または撮影日を優先）
- 更新日
- ファイル名
- ランダム（シャッフル）

---

## 5. データ要件（保存する情報）

### ■ アプリ設定
- ルートフォルダパス
- 対象拡張子
- スライド間隔

### ■ 写真情報
- ファイルパス
- 日付（作成 / 更新 / 可能なら撮影日）
- ファイル名

### ■ ユーザー付与情報
- 人物タグ
- お気に入りフラグ

### ■ キャッシュ
- サムネイル（アプリ配下に保存）

---

## 6. 画面要件（最小構成）

### 6.1 メイン（1枚表示）

- 写真表示
- 次へ / 前へ
- ランダム表示
- スライド開始 / 停止
- お気に入り ON / OFF
- 人物タグの追加 / 削除

---

### 6.2 一覧（グリッド）

- サムネイル表示
- クリックでメイン画面へ遷移
- ソート切替
- 人物フィルタ
- お気に入りフィルタ

---

### 6.3 人物一覧

- 人物タグ一覧表示
- タグ選択で絞り込み表示

---

### 6.4 設定画面

- フォルダ変更
- 再スキャン
- スライド間隔設定

---

## 7. 非機能要件（最低限）

- 写真枚数が多くても最低限使用可能（サムネイル生成で体感改善）
- DBやキャッシュ削除による「再構築手段」を提供
- 外部通信を行わない  
（ライブラリ更新チェック等も含め通信禁止）

---

## 8. 完了条件（MVP）

以下を満たした場合、本アプリは完成とする。

- フォルダを指定して写真を表示できる
- ランダム表示ができる  
  - 全体  
  - 人物絞り込み  
  - お気に入り内
- 人物タグ付けとお気に入りが永続化される（再起動後も保持）
- 作成日順などのソートができる
- localhostのみで動作し、外部通信を行わない
